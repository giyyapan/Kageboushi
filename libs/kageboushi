#!/bin/bash
ctrl_c(){
		echo 'aborted by Ctrl_c'
		echo 'Kageboushi exit'
		exit 0
}
trap ctrl_c INT
action=$1
red=31
declare -a args=($*)
case $action in
		'create'| 'build' | 'new')
				$CWD/libs/create ${args[@]:1}
				;;
		
		'listlibs' | 'lslibs' | 'ls')
				if [ $2 ];
				then
						echo "List libs contains keyword '$2'"
				else
						echo "List all libs"
				fi
				echo ""
				$CWD/libs/lslibs ${args[@]:1}
				echo ""
				echo " Use"
				echo "   kb addlib [libNumber|libName..] targetHTML|targetProjectPath"
				echo " To add one or more libs to an exist project (generated by Kageboushi) or html file"
				echo " e.g. "
				echo "   kb addlib 0 1 ~/myProject/static/index.html"
				echo ""
				;;
		
		'addlib' | 'add')
				$CWD/libs/addlib ${args[@]:1}
				;;

		*)
				echo ""
				echo -e "\033[${red}mError\033[0m:"
				echo "  Need a valid action"
				echo "  Action can be create | lslibs | addlib"
				echo ""
				echo "e.g."
				echo "    'kb build ~/newProject' to create a project" 
				echo "    'kb lslibs' to list all available libs"
				echo "    'kb lslibs j' to list libs with keyworkd 'j'"
				echo "    'kb addlib 3 ~/pathToYourProject/index.html' to add lib number 3 to a html file"
				echo "    'kb addlib jquery ~/newProject' to add lib jquery to a Kageboushi generated project"
				echo ""
				;;
esac
